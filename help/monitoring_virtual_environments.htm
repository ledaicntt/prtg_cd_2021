<!--Monitoring Virtual Environments-->


<div id="main">
  <div id="head">
     <div class="buttonbox">
       <a href="/help/index.htm" class="manual-content-icon">Content</a>
       <span class="spacer"></span><a href="monitoring_backups.htm" class="manual-previous-icon">Previous</a>
       <span class="spacer"></span><a href="monitoring_databases.htm" class="manual-next-icon">Next</a>
     </div>
     PRTG Manual: <b>Monitoring Virtual Environments</b>
  </div> 


  <div id="content">
    <div class="tabs-container help"> 
      <h1><%NUMBERING1%>.<%NUMBERING2%>.<%NUMBERING3%> PRTG Manual: Monitoring Virtual Environments</h1> 
      <p>A highly flexible IT infrastructure is a common need nowadays and virtualization has become an important pillar of the IT all over the world. Applications in your network might be distributed over many different servers, networks, and locations. They might also be in the cloud, and your computations can take place in data centers spread over the whole world. So, if your network connection or any other corresponding hardware fails, hundreds of applications might be unavailable—an impact to your daily business processes which should be avoided at any costs.</p>
<p>Because of this, monitoring the physical infrastructure of your data center is still a must in times of virtual environments. With the layer of virtualization in addition to your physical equipment, your logical infrastructure also needs a close treatment. PRTG assists you to deal with these advanced requirements and enables you to react proactively to issues before they affect your whole system. With PRTG you can monitor all layers of your IT infrastructure in a comprehensible way so you will reduce issues related to dynamic IT environments significantly.</p>
<p class="p_InTopicHeading"><a id="layers"></a><span class="f_InTopicHeading">Monitoring All Layers of Your IT Infrastructure</span></p>
<p>In general, you can assume that with the layer of virtualization you have to monitor a total of four layers in your IT infrastructure:</p>
<ul style="text-indent:0px; margin-left: 13px;list-style-position:outside;">
<li><span class="f_BoldCustom">Hardware (Server Racks):</span><span class="f_ListBulleted"> Usually you will set up your monitoring in the common way and monitor most of the hardware components in your network with <a href="available_sensor_types.htm#snmp" class="topiclink">PRTG's SNMP sensors</a>. You are able to gain monitoring data about many different device readings such as CPU load, memory, disk space with <a href="snmp_monitoring.htm" class="topiclink">this monitoring technology</a>, as well as information about network traffic and bandwidth usage of your routers and switches. It is absolutely mandatory for a working IT environment to monitor all hardware components in order to be alerted if something fails or hardware resources are running out. In addition, you can identify potential bottlenecks affecting your virtualized infrastructure. You can set this monitoring up in the usual way.</span><br />
<span class="f_ListBulleted">&nbsp;</span></li>
<li><span class="f_BoldCustom">Host Server Hardware:</span><span class="f_ListBulleted"> It is essential to explicitly monitor the host hardware of your virtualization solution. If you have issues with your virtual machines (VMs), the origin might be a host hardware failure. You should closely monitor your VM host servers to get alerted if the status is other than &quot;normal&quot;. Besides the out of the box hardware sensors, PRTG provides specific sensors for various virtualization host servers; the following monitoring data of your host servers will help you prevent issues in virtualized environments: </span></li>
<ul style="text-indent:0px; margin-left: 13px;list-style-position:outside;">
<li><span class="f_ListBulleted">VMware: current reading and health status (via WBEM), a general status as shown in vSphere (via SOAP), and disk space of a VMware data store (via SOAP)</span></li>
<li><span class="f_ListBulleted">Hyper-V: host health critical values, deposited pages, network traffic, CPU usage of guests, hypervisor, and in total</span></li>
<li><span class="f_ListBulleted">Citrix XenServer: CPU, memory, and network usage, the number of running virtual machines on the host server, and load average </span><br />
<span class="f_ListBulleted">&nbsp;</span></li>
</ul>
<li><span class="f_BoldCustom">VMs from the &quot;Outside&quot;:</span><span class="f_ListBulleted"> The virtual machines run on their particular host servers. PRTG can show you the status of single virtual machines and several of their performance counters. It might be helpful to know which resources a single VM uses and needs, but monitoring single VMs is not advisable in every case because it has a noticeable influence on the overall performance. Often it will be sufficient to monitor only VMs which are critical for your network. If a VM reaches its capacity limits, PRTG can alert you and you can conduct the corresponding resolution steps like enhancing this VM's resources. Indicators for a healthy virtual machine which you can monitor with PRTG out of the box are:</span></li>
<ul style="text-indent:0px; margin-left: 13px;list-style-position:outside;">
<li><span class="f_ListBulleted">VMware: CPU and memory usage, disk read and write speed, read and write latency, and network usage</span></li>
<li><span class="f_ListBulleted">Hyper-V: CPU usage, disk read and write speed</span></li>
<li><span class="f_ListBulleted">Citrix XenServer: CPU usage and free memory</span><br />
<span class="f_ListBulleted">&nbsp;</span></li>
</ul>
<li><span class="f_BoldCustom">VMs from the &quot;Inside&quot; (Operating Systems):</span><span class="f_ListBulleted"> You can monitor the Windows operating system of a single VM with PRTG's standard <a href="available_sensor_types.htm#wmi" class="topiclink">WMI sensors</a>, for example. <a href="wmi_monitoring.htm" class="topiclink">With this technology</a> you can access data of various Windows parameters. Other operating systems like Linux/MacOS can make data available via <a href="ssh_monitoring.htm" class="topiclink">SSH</a> and <a href="snmp_monitoring.htm" class="topiclink">SNMP</a>. The status of the operating systems on your VMs can indicate potential issues of the same, just like the operating systems on your physical machines which are important for a reliably working IT infrastructure: You can monitor these with the same attention, depending on your application scenario, but be careful due to performance considerations. Especially many WMI sensors can result in load problems, so monitor only really important systems &quot;from the inside&quot;. Furthermore, you do not need to monitor every item multiple times. For example, it might be sufficient to monitor free disk space only from the outside of the actual VM.</span></li>
</ul>
<p class="p_InTopicHeading"><a id="virtual"></a><span class="f_InTopicHeading">Monitoring the Virtual Infrastructure</span></p>
<p>To monitor your IT infrastructure, best practice is to set up the monitoring of the hardware layer of your data center first in PRTG, especially in order to find potential bottlenecks which might have an impact on your virtual servers. Then you can start monitoring your virtual environment itself. If you use several solutions for virtual hosting, it is also a good idea to group related host servers, their virtual machines, and the operating systems together. The screenshot below will give you an idea about how to organize this.</p>
<div class="p_ImageCaption"><div style="width:498px;padding:0px"><img src="hmfile_hash_06715e71.png" width="498" height="494" style="border:none" alt="Grouped Virtual Components" title="Grouped Virtual Components" /><p style="text-align:center"><span class="f_ImageCaption">Grouped Virtual Components</span></p></div></div>
<p>The screenshot above shows you the particular group &quot;Virtual Hosting&quot; of an entire PRTG setup. This is an example how monitoring of virtual environments can look like. The sample group contains several subgroups for the virtualization solutions Citrix &quot;XenServer&quot;, Microsoft &quot;Hyper-V&quot;, and VMware &quot;vSphere&quot;. The vSphere group, for example, has three subgroups: we monitor the vCenter VMs and the vCenter Windows system, the performance of the host server, and the storage system of the host.</p>
<p class="p_InTopicHeading"><a id="hosts"></a><span class="f_InTopicHeading">Devices for Physical Hosts</span></p>
<p>In PRTG, set up devices which represent the physical hosts of your virtual machines. For example, for your VMware hosts, add devices which represent the ESXi servers, for Hyper-V add devices which represent your Hyper-V host servers, for Citrix add devices which represent your Xen servers. </p>
<p>Then you can add suitable and expressive sensors to the host server devices. Running PRTG's <a href="auto_discovery.htm" class="topiclink">auto-discovery</a>, many useful sensors will be created automatically. There are several pre-configured host hardware sensors available out of the box in PRTG:</p>
<ul style="text-indent:0px; margin-left: 13px;list-style-position:outside;">
<li><span class="f_BoldCustom"><a href="vmware_host_hardware_wbem_sensor.htm" class="topiclink">VMware Host Hardware (WBEM) Sensor</a></span><span class="f_ListBulleted">: monitors an ESXi server via Web-Based Enterprise Management (WBEM)</span></li>
<li><span class="f_BoldCustom"><a href="vmware_host_hardware_status_soap_sensor.htm" class="topiclink">VMware Host Hardware Status (SOAP) Sensor</a></span><span class="f_ListBulleted">: monitors a VMware host server via Simple Object Access Protocol (SOAP)</span></li>
<li><span class="f_BoldCustom"><a href="vmware_host_performance_soap_sensor.htm" class="topiclink">VMware Host Performance (SOAP) Sensor</a></span><span class="f_ListBulleted">: monitors a VMware host server via Simple Object Access Protocol (SOAP)</span></li>
<li><span class="f_BoldCustom"><a href="hyper_v_host_server_sensor.htm" class="topiclink">Hyper-V Host Sensor</a></span><span class="f_ListBulleted">: monitors via Windows Management Instrumentation (WMI) or Windows Performance Counters, as configured in the &quot;Windows Compatibility Options&quot; of the parent device</span></li>
<li><span class="f_BoldCustom"><a href="citrix_xenserver_host_sensor.htm" class="topiclink">Citrix XenServer Host Sensor</a></span><span class="f_ListBulleted">: monitors via Hypertext Transfer Protocol (HTTP)</span></li>
</ul>
<p>These sensor types monitor hardware specific counters to ensure that no hardware issues affect your actual virtual machines. Additional sensor types can monitor the host hardware via SNMP (for example, traffic and custom requests), data storage on ESXi servers via SOAP, as well as there are sensors for network adapters and storage devices which are connected to a Hyper-V host server.</p>
<p class="p_InTopicHeading"><a id="machines"></a><span class="f_InTopicHeading">Devices for Virtual Machines</span></p>
<p>To monitor your actual virtual machines, add them to your host servers in PRTG. For a better overview, you might want to add another device to PRTG which represents your host server and add sensors for your VM to there. The according sensors for virtual machines will show you the performance of single VMs as well as their usage of resources. This will help you identify VMs with poor performance and react proactively before one or more VMs crash. As mentioned above, you can additionally monitor your particular VMs from the inside (which means the operating systems on your VMs) if necessary. See the sections below for details about particular virtualization solutions.</p>
<p>&nbsp;<br />
&nbsp;<br />
<a id="vmware"></a><span class="f_BoldCustom">VMware Virtual Machine</span></p>
<p>PRTG's <span class="f_BoldCustom"><a href="vmware_virtual_machine_soap_sensor.htm" class="topiclink">VMware Virtual Machine (SOAP) Sensor</a></span><span class="f_ListBulleted"> monitors VMs on a VMware host server via Simple Object Access Protocol (SOAP). With the VMware system, the general idea is to add a </span><span class="f_ItalicCustom">vCenter</span><span class="f_ListBulleted"> server as a device to PRTG and use the vCenter as parent device where you add the sensors to for your virtual machines. So, in the case of </span><span class="f_ItalicCustom">vMotion</span><span class="f_ListBulleted"> when your VMs change their host server, PRTG will be able to follow these movements and will never lose the monitored VMs. </span></p>
<p><span class="f_ListBulleted">For this sensor type, you need the </span><span class="f_ItalicCustom">Microsoft .NET Framework</span><span class="f_ListBulleted"> with the latest update of version 4.0 running on the probe machine. If you use many VMware sensors, we also recommend adjusting the settings on your VMware host server to accept more incoming connections.</span></p>
<div class="p_ImageCaption"><div style="width:499px;padding:0px"><img src="hmfile_hash_4739cb11.png" width="499" height="273" style="border:none" alt="vSphere Group" title="vSphere Group" /><p style="text-align:center"><span class="f_ImageCaption">vSphere Group</span></p></div></div>
<p>This screenshot a sample vSphere group in PRTG. As recommended, the VMware virtual machines are added to the vCenter device. There is also a dedicated device for the vCenter Windows operating system with common WMI sensors for CPU, memory, disk, and network usage. The ESXi host servers are organized in their own groups regarding performance and storage. In this example, PRTG monitors the hosts with the standard SNMP hardware sensors as well as with the specific VMware ESXi host sensors.</p>
<p class="p_BoldCustom"><span class="f_BoldCustom">&nbsp;</span><br />
<a id="hyper-v"></a><span class="f_BoldCustom">Microsoft Hyper-V Virtual Machine</span></p>
<p>PRTG's <span class="f_BoldCustom"><a href="hyper_v_virtual_machine_sensor.htm" class="topiclink">Hyper-V Virtual Machine Sensor</a></span><span class="f_ListBulleted"> monitors VMs via Windows Management Instrumentation (WMI) or Windows Performance Counters, as configured in the &quot;Windows Compatibility Options&quot; of the parent device. With this hybrid approach, the sensor first tries to query data via performance counters and uses WMI as a fallback if there are no performance counters available. Performance counters in general need less system resources than WMI. We recommend using System Center Virtual Machine Manager (SCVMM) as parent device for this sensor type, because when your VMs change their physical host with </span><span class="f_ItalicCustom">Live Migration</span><span class="f_ListBulleted">, this sensor will still be able to continue monitoring. You should also disable User Account Control (UAC) in the Windows operating system of the VM. </span></p>
<div class="p_ImageCaption"><div style="width:499px;padding:0px"><img src="hmfile_hash_2cb2ff16.png" width="499" height="273" style="border:none" alt="Hyper-V Group" title="Hyper-V Group" /><p style="text-align:center"><span class="f_ImageCaption">Hyper-V Group</span></p></div></div>
<p>This screenshot shows a sample Hyper-V group in PRTG. There is a dedicated group for failover clustering where two nodes are monitored with several SNMP and WMI sensors, as well as <a href="hyper_v_host_server_sensor.htm" class="topiclink">Hyper-V Host Server sensors</a> and sensors for the Hyper-V virtual machines. This ensures that Hyper-V and failover clustering works without any issues. The Hyper-V hosts are monitored the same way, organized in a dedicated group for hosts. </p>
<p>Note that we recommend adding the particular virtual machines to the SCVMM server if possible! We pointed out above that you should add the VMs to an SCVMM server to avoid issues with Live Migration. You can see this in the group &quot;System Center&quot;. The particular VMs are added to the dedicated device &quot;Hyper-V Guests&quot;. </p>
<p>&nbsp;<br />
&nbsp;<br />
<a id="xenserver"></a><span class="f_BoldCustom">Citrix XenServer Virtual Machine</span></p>
<p>PRTG's <span class="f_BoldCustom"><a href="citrix_xenserver_virtual_machine_sensor.htm" class="topiclink">Citrix XenServer Virtual Machine Sensor</a></span><span class="f_ListBulleted"> monitors VMs via Hypertext Transfer Protocol (HTTP). For this sensor type, you have to add a device to PRTG which represents a Citrix XenServer with version 5.0 or later. Another requirement is the </span><span class="f_ItalicCustom">Microsoft .NET Framework</span><span class="f_ListBulleted">: You have to run the latest update of version 4.0 on the probe machine where you add this sensor to.</span></p>
<p><span class="f_ListBulleted">In a XenServer pool, every host knows each running VM. Because of this, there is no central instance which provides all available data so it does not matter on which host you query your VMs. All queries on any host are automatically forwarded to the pool master which manages the XenServer pool. So it is sufficient to create the desired sensors for your XenServer VMs on a device that represents one host server of your pool. PRTG's XenServer sensors can figure out by themselves which host is running and retrieve the according data.</span></p>
<div class="p_ImageCaption"><div style="width:498px;padding:0px"><img src="hmfile_hash_ff55a36f.png" width="498" height="404" style="border:none" alt="XenServer Group" title="XenServer Group" /><p style="text-align:center"><span class="f_ImageCaption">XenServer Group</span></p></div></div>
<p>This screenshot shows a sample XenServer group in PRTG. There are two devices for XenServer hosts (Xen 1 and Xen 2), each with a <a href="citrix_xenserver_host_sensor.htm" class="topiclink">Citrix XenServer Host sensor</a> and several <a href="citrix_xenserver_virtual_machine_sensor.htm" class="topiclink">Citrix XenServer Virtual Machine sensors</a> for the particular VMs on this host. Furthermore, the Windows operating system is represented as a dedicated device (&quot;virtualcontrol&quot;) which is monitored with several WMI sensors regrading CPU, disk, memory, and network usage.</p>
<p class="p_InTopicHeading"><a id="conclusion"></a><span class="f_InTopicHeading">Conclusion</span></p>
<p>The sensor types described in this section monitor virtual machine specific counters to ensure that all your VMs have enough resources available. If a VM is overloaded, PRTG can notify you immediately and you can proactively take care of issues before a particular VM has an outage or other failures. Additionally, we have shown an idea for a structured virtual monitoring with several recommendations.</p>
<p><img src="icon-book-arrows.png" width="17" height="17" alt="icon-book-arrows" style="float:left;margin:0px 10px 10px 0px; border:none" />You can find all available sensors for virtual servers and the according virtual machines in section <span class="f_BoldCustom"><a href="available_sensor_types.htm#virtual" class="topiclink">List of Available Sensor Types—Virtual Servers Sensors</a></span>.</p>
<p class="p_InTopicHeading"><a id="performance"></a><span class="f_InTopicHeading">Performance Considerations</span></p>
<p>For best performance when monitoring virtual environments, we strongly recommend that you use a computer with <span style="font-weight: bold;">Windows Server 2012 R2</span> to run the PRTG probe with the according sensors. So for example, you can run up to 300 VMware sensors in a 60 seconds scanning interval on Windows 2012 R2, while you can only use 30 VMware sensors with the same interval on Windows 2008 R2.</p>
<p class="p_InTopicHeading"><a id="more"></a><span class="f_InTopicHeading">More</span></p>
<p class="p_ListBulleted"><span class="f_ListBulleted">Knowledge Base: I run PRTG on VMware. How can I obtain best performance?</span></p>
<ul style="text-indent:0px; margin-left: 13px;list-style-position:outside;">
<li><span class="f_ListBulleted"><a href="https://kb.paessler.com/en/topic/49193?utm_source=prtg&utm_medium=webgui&utm_campaign=kb" target="_blank" class="weblink">https://kb.paessler.com/en/topic/49193</a></span></li>
</ul>
<p class="p_InTopicHeading"><a id="topics"></a><span class="f_InTopicHeading">Sensor Technologies—Topics</span></p>
<ul style="text-indent:0px; margin-left: 13px;list-style-position:outside;">
<li><span class="f_BoldCustom"><a href="snmp_monitoring.htm" class="topiclink">Monitoring via SNMP</a></span></li>
<li><span class="f_BoldCustom"><a href="wmi_monitoring.htm" class="topiclink">Monitoring via WMI</a></span></li>
<li><span class="f_BoldCustom"><a href="ssh_monitoring.htm" class="topiclink">Monitoring via SSH</a></span></li>
<li><span class="f_BoldCustom"><a href="packet_sniffer_monitoring.htm" class="topiclink">Monitoring Bandwidth via Packet Sniffing</a></span></li>
<li><span class="f_BoldCustom"><a href="flow_monitoring.htm" class="topiclink">Monitoring Bandwidth via Flows</a></span></li>
<li><span class="f_BoldCustom"><a href="bandwidth_monitoring_comparison.htm" class="topiclink">Bandwidth Monitoring Comparison</a></span></li>
<li><span class="f_BoldCustom"><a href="quality_of_service_monitoring.htm" class="topiclink">Monitoring Quality of Service</a></span></li>
<li><span class="f_BoldCustom"><a href="email_round_trip_monitoring.htm" class="topiclink">Monitoring Email Round Trip</a> </span></li>
<li><span class="f_BoldCustom"><a href="monitoring_backups.htm" class="topiclink">Monitoring Backups</a></span></li>
<li><span class="f_BoldCustom"><a href="monitoring_virtual_environments.htm" class="topiclink">Monitoring Virtual Environments</a></span></li>
<li><span class="f_BoldCustom"><a href="monitoring_databases.htm" class="topiclink">Monitoring Databases</a></span></li>
<li><span class="f_BoldCustom"><a href="monitoring_syslogs_and_snmp_traps.htm" class="topiclink">Monitoring Syslogs and SNMP Traps</a></span></li>
</ul>

    </div>
    <p><small>Keywords: </small></p>
  </div>
  <div class="buttonbox">
  <div id="manual-navigation">
       <a href="/help/index.htm" class="manual-content-icon">Content</a>
       <span class="spacer"></span><a href="monitoring_backups.htm" class="manual-previous-icon">Previous</a>
       <span class="spacer"></span><a href="monitoring_databases.htm" class="manual-next-icon">Next</a>
  </div>
  </div>
</div>



