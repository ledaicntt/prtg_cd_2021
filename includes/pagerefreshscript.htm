<div id="maprefreshlink">
  <span>
  </span>
  <a href="#" onclick="refresh();return(false)">
  <span><#lang key="html.mapshow.refresh" default="Refresh"></span>
  <img src='/images/refresh.png'></a>

</div>
<script type="text/javascript">
<!--

	function getURLParam(strParamName){
	  var strReturn = "";
	  var strHref = window.location.href;
	  var myString = strHref.split("#");
	  strHref= myString[0];
	
	  if ( strHref.indexOf("?") > -1 ){
	    var strQueryString = strHref.substr(strHref.indexOf("?")).toLowerCase();
	    var aQueryString = strQueryString.split("&");
	    for ( var iParam = 0; iParam < aQueryString.length; iParam++ ){
	      if ( aQueryString[iParam].indexOf(strParamName.toLowerCase() + "=") > -1 ){
	        var aParam = aQueryString[iParam].split("=");
	        strReturn = aParam[1];
	        break;
	      }
	    }
	  }
	  return unescape(strReturn);
	} 
	function refresh()
	{
	  	var mylink=document.getElementById('maprefreshlink');
	  	mylink.innerHTML='<#langjs key="html.mapshow.refreshing" default="Refreshing">...';
	 	location.replace(window.location.pathname+window.location.search);
	}

  var interval=60;
  if (getURLParam("interval")!="")
  {
  	interval=parseInt(getURLParam("interval"));
  	if (interval<3) {interval=60;};
  }

  setTimeout("refresh();",interval*1000);

//-->
</script> 